### javaScrpitçš„äº‹ä»¶

#### ä»€ä¹ˆæ˜¯äº‹ä»¶â“

**Webé¡µé¢éœ€è¦ç»å¸¸å’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤äº’ï¼Œè€Œäº¤äº’çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯èƒ½æƒ³è¦æ•æ‰è¿™ä¸ªäº¤äº’çš„è¿‡ç¨‹ï¼š**

-  æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ã€ç”¨æˆ·åœ¨è¾“å…¥æ¡†é‡Œé¢è¾“å…¥äº†æŸä¸ªæ–‡æœ¬ã€ç”¨æˆ·é¼ æ ‡ç»è¿‡äº†æŸä¸ªä½ç½®ï¼› 
-  æµè§ˆå™¨éœ€è¦æ­å»ºä¸€æ¡JavaScriptä»£ç å’Œäº‹ä»¶ä¹‹é—´çš„æ¡¥æ¢ï¼› 
-  å½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè®©JavaScriptå¯ä»¥ç›¸åº”ï¼ˆæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹äº‹ä»¶ç¼–å†™å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ï¼› 

**å¦‚ä½•è¿›è¡Œäº‹ä»¶ç›‘å¬å‘¢**â“

- äº‹ä»¶ç›‘å¬æ–¹å¼ä¸€ï¼šåœ¨scriptä¸­ç›´æ¥ç›‘å¬ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰ï¼›
- äº‹ä»¶ç›‘å¬æ–¹å¼äºŒï¼šDOMå±æ€§ï¼Œé€šè¿‡å…ƒç´ çš„onæ¥ç›‘å¬äº‹ä»¶ï¼›
- äº‹ä»¶ç›‘å¬æ–¹å¼ä¸‰ï¼šé€šè¿‡EventTargetä¸­çš„addEventListeneræ¥ç›‘å¬ï¼›

#### **äº‹ä»¶åˆ—è¡¨ç±»å‹ğŸ“š**

â—¼ **1ï¸âƒ£é¼ æ ‡äº‹ä»¶ï¼š**

ï° click â€”â€” å½“é¼ æ ‡ç‚¹å‡»ä¸€ä¸ªå…ƒç´ æ—¶ï¼ˆè§¦æ‘¸å±è®¾å¤‡ä¼šåœ¨ç‚¹å‡»æ—¶ç”Ÿæˆï¼‰ã€‚

ï° mouseover / mouseout â€”â€” å½“é¼ æ ‡æŒ‡é’ˆç§»å…¥/ç¦»å¼€ä¸€ä¸ªå…ƒç´ æ—¶ã€‚

ï° mousedown / mouseup â€”â€” å½“åœ¨å…ƒç´ ä¸ŠæŒ‰ä¸‹/é‡Šæ”¾é¼ æ ‡æŒ‰é’®æ—¶ã€‚

ï° mousemove â€”â€” å½“é¼ æ ‡ç§»åŠ¨æ—¶ã€‚

â—¼ 2ï¸âƒ£**é”®ç›˜äº‹ä»¶ï¼š**

ï° keydown å’Œ keyup â€”â€” å½“æŒ‰ä¸‹å’Œæ¾å¼€ä¸€ä¸ªæŒ‰é”®æ—¶ã€‚

â—¼ 3ï¸âƒ£**è¡¨å•ï¼ˆformï¼‰å…ƒç´ äº‹ä»¶ï¼š**

ï° submit â€”â€” å½“è®¿é—®è€…æäº¤äº†ä¸€ä¸ª <form> æ—¶ã€‚

ï° focus â€”â€” å½“è®¿é—®è€…èšç„¦äºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¾‹å¦‚èšç„¦äºä¸€ä¸ª <input>ã€‚ 

â—¼4ï¸âƒ£ **Document äº‹ä»¶ï¼š**

ï° DOMContentLoaded â€”â€” å½“ HTML çš„åŠ è½½å’Œå¤„ç†å‡å®Œæˆï¼ŒDOM è¢«å®Œå…¨æ„å»ºå®Œæˆæ—¶ã€‚

â—¼ 5ï¸âƒ£**CSS äº‹ä»¶ï¼š**

ï° transitionend â€”â€” å½“ä¸€ä¸ª CSS åŠ¨ç”»å®Œæˆæ—¶ã€‚

#### **è®¤è¯†äº‹ä»¶æµâ¬‡â¬‡â¬‡**

å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Š`å¯¹ç€ä¸€ä¸ªå…ƒç´ ç‚¹å‡»æ—¶ï¼Œä½ ç‚¹å‡»çš„ä¸ä»…ä»…æ˜¯è¿™ä¸ªå…ƒç´ æœ¬èº«ï¼› `

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„HTMLå…ƒç´ æ˜¯`å­˜åœ¨çˆ¶å­å…ƒç´ å åŠ å±‚çº§`

æ¯”å¦‚ä¸€ä¸ªspanå…ƒç´ æ˜¯æ”¾åœ¨divå…ƒç´ ä¸Šçš„ï¼Œdivå…ƒç´ æ˜¯æ”¾åœ¨bodyå…ƒç´ ä¸Šçš„ï¼Œbodyå…ƒç´ æ˜¯æ”¾åœ¨htmlå…ƒç´ ä¸Šçš„ï¼›

**ä»¥ä¸‹ä¾‹å­â—**

**htmlæ–‡ä»¶**

```java
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<body>

    <div class="box">
        <span class="word">å“ˆå“ˆå“ˆ</span>
    </div>
</body>
</html>
<!-- è¿™é‡Œä»åº•éƒ¨å¼•å…¥åŸå› é˜²æ­¢æ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶å€™ç›‘å¬çš„DOMèŠ‚ç‚¹è¿˜æ²¡æœ‰åŠ è½½åˆ›å»º -->
<script src="event.js"></script>
```

Event jsæ–‡ä»¶

```javascript
var spanEl = document.querySelector(".word");
var divEl = document.querySelector(".box");
var bodyEl = document.body;


spanEl.addEventListener('click',function(){
    console.log("spanè¢«ç‚¹å‡»");
})
divEl.addEventListener('click',function(){
    console.log("divè¢«ç‚¹å‡»");
})
bodyEl.addEventListener('click',function(){
    console.log("bodyè¢«ç‚¹å‡»");
})
```

**å½“ç‚¹å‡»å“ˆå“ˆå“ˆå‡ºç°å¦‚ä¸‹ç»“æœ**

![jsäº‹ä»¶æµ](https://blog-img-qrx.oss-cn-beijing.aliyuncs.com/share/js%E4%BA%8B%E4%BB%B6%E6%B5%81.PNG)

#### äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·â—â—

**æˆ‘ä»¬ä¼šå‘ç°é»˜è®¤æƒ…å†µä¸‹äº‹ä»¶æ˜¯**ä»`æœ€å†…å±‚çš„spanå‘å¤–ä¾æ¬¡ä¼ é€’çš„é¡ºåºï¼Œè¿™ä¸ªé¡ºåºæˆ‘ä»¬ç§°ä¹‹ä¸ºäº‹ä»¶å†’æ³¡ï¼ˆEvent Bubbleï¼‰`

**äº‹å®ä¸Šï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ç›‘å¬äº‹ä»¶æµçš„æ–¹å¼å°±æ˜¯**`ä»å¤–å±‚åˆ°å†…å±‚ï¼ˆbody -> spanï¼‰ï¼Œè¿™ç§ç§°ä¹‹ä¸ºäº‹ä»¶æ•è·ï¼ˆEvent Captureï¼‰ï¼› `

##### **æ•è·å’Œå†’æ³¡çš„è¿‡ç¨‹**

**å¦‚æœæˆ‘ä»¬éƒ½ç›‘å¬ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºâœ”æ¥æ‰§è¡Œï¼š**

â—¼ æ•è·é˜¶æ®µï¼ˆCapturing phaseï¼‰ï¼š 

ï° äº‹ä»¶ï¼ˆä» Windowï¼‰å‘ä¸‹èµ°è¿‘å…ƒç´ ã€‚

â—¼ ç›®æ ‡é˜¶æ®µï¼ˆTarget phaseï¼‰ï¼š 

ï° äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ ã€‚

â—¼ å†’æ³¡é˜¶æ®µï¼ˆBubbling phaseï¼‰ï¼š 

ï° äº‹ä»¶ä»å…ƒç´ ä¸Šå¼€å§‹å†’æ³¡

> äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·éƒ½ä¼šæ‰§è¡Œ

`å¼€å‘ä¸­é€šå¸¸ä¼šä½¿ç”¨äº‹ä»¶å†’æ³¡ï¼Œæ‰€ä»¥äº‹ä»¶æ•è·äº†è§£å³å¯`

#### äº‹ä»¶å¯¹è±¡

**å½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå°±ä¼šæœ‰å’Œè¿™ä¸ªäº‹ä»¶ç›¸å…³çš„å¾ˆå¤šä¿¡æ¯ï¼Œå®ƒåŒ…å«äº‹ä»¶ä¿¡æ¯ï¼š**

- æ¯”å¦‚äº‹ä»¶çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œä½ ç‚¹å‡»çš„æ˜¯å“ªä¸€ä¸ªå…ƒç´ ï¼Œç‚¹å‡»çš„ä½ç½®æ˜¯å“ªé‡Œç­‰ç­‰ç›¸å…³çš„ä¿¡æ¯ï¼›
- é‚£ä¹ˆè¿™äº›ä¿¡æ¯ä¼šè¢«`å°è£…åˆ°ä¸€ä¸ªEventå¯¹è±¡`ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡ç”±æµè§ˆå™¨åˆ›å»ºï¼Œç§°ä¹‹ä¸ºeventå¯¹è±¡

`å¦‚ä½•è·å–Eventå¯¹è±¡â­•`

```javascript

spanEl.onclick = function(event)
{
    console.log("äº‹ä»¶å¯¹è±¡",event);
}
```

#### **eventå±æ€§**

â—¼ **å¸¸è§çš„å±æ€§ï¼š**

ï° typeï¼šäº‹ä»¶çš„ç±»å‹ï¼›

ï° targetï¼šå½“å‰äº‹ä»¶å‘ç”Ÿçš„å…ƒç´ ï¼›

ï° currentTargetï¼šå½“å‰å¤„ç†äº‹ä»¶çš„å…ƒç´ ï¼›

ï° eventPhaseï¼šäº‹ä»¶æ‰€å¤„çš„é˜¶æ®µï¼›

ï° offsetXã€offsetYï¼šäº‹ä»¶å‘ç”Ÿåœ¨å…ƒç´ å†…çš„ä½ç½®ï¼›

ï° clientXã€clientYï¼šäº‹ä»¶å‘ç”Ÿåœ¨å®¢æˆ·ç«¯å†…çš„ä½ç½®ï¼›

ï° pageXã€pageYï¼šäº‹ä»¶å‘ç”Ÿåœ¨å®¢æˆ·ç«¯ç›¸å¯¹äºdocumentçš„ä½ç½®ï¼›

ï° screenXã€screenYï¼šäº‹ä»¶å‘ç”Ÿç›¸å¯¹äºå±å¹•çš„ä½ç½®ï¼›

â—¼ **å¸¸è§çš„æ–¹æ³•ï¼š**

ï° preventDefaultï¼šå–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼›

ï° stopPropagationï¼šé˜»æ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ é€’ï¼ˆå†’æ³¡æˆ–è€…æ•è·éƒ½å¯ä»¥é˜»æ­¢ï¼‰ï¼›

`æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡thisæ¥è·å–å½“å‰çš„å‘ç”Ÿå…ƒç´ ï¼š`

```javascript
spanEl.onclick = function(event)
{
    console.log(this )
    console.log(this == event.target)
}
```

> event.targetä¸thisä½œç”¨ä¸€æ ·

**é‚£ä¹ˆè¿™äº›å…ƒç´ çš„äº‹ä»¶æ˜¯ç”±è°æ¥å®ç°**

#### **EventTargetç±»**

- **æ‰€æœ‰çš„èŠ‚ç‚¹ã€å…ƒç´ éƒ½ç»§æ‰¿è‡ªEventTarget**
-  EventTargetæ˜¯ä¸€ä¸ªDOMæ¥å£ï¼Œä¸»è¦ç”¨äºæ·»åŠ ã€åˆ é™¤ã€æ´¾å‘Eventäº‹ä»¶ï¼›

**EventTargetæ–¹æ³•ğŸ”°**

- addEventListenerï¼šæ³¨å†ŒæŸä¸ªäº‹ä»¶ç±»å‹ä»¥åŠäº‹ä»¶å¤„ç†å‡½æ•°ï¼›
- removeEventListenerï¼šç§»é™¤æŸä¸ªäº‹ä»¶ç±»å‹ä»¥åŠäº‹ä»¶å¤„ç†å‡½æ•°ï¼›
- dispatchEventï¼šæ´¾å‘æŸä¸ªäº‹ä»¶ç±»å‹åˆ°EventTargetä¸Šï¼›

```javascript
// äº‹ä»¶çš„æ´¾å‘ï¼Œè¿™é‡Œè°æ´¾å‘è°æ¥æ”¶
spanEl.addEventListener('click',function(){
    console.log("spanè¢«ç‚¹å‡»");
    window.dispatchEvent(new Event("share"))
    bodyEl.dispatchEvent(new Event("share"))
})
window.addEventListener('share',function(event){
    console.log("ç›‘å¬shareäº‹ä»¶",event);
})
bodyEl.addEventListener('share',function(event){
    console.log("bodyç›‘å¬shareäº‹ä»¶",event);
})
```

#### **äº‹ä»¶å§”æ‰˜**â—â—â—â—

**äº‹ä»¶å†’æ³¡åœ¨æŸç§æƒ…å†µä¸‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¼ºå¤§çš„äº‹ä»¶å¤„ç†æ¨¡å¼ â€“** **äº‹ä»¶å§”æ‰˜æ¨¡å¼**ï¼ˆä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼‰

**é‚£ä¹ˆè¿™ä¸ªæ¨¡å¼æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ**

- å› ä¸ºå½“å­å…ƒç´ è¢«ç‚¹å‡»æ—¶ï¼Œçˆ¶å…ƒç´ å¯ä»¥é€šè¿‡å†’æ³¡å¯ä»¥ç›‘å¬åˆ°å­å…ƒç´ çš„ç‚¹å‡»ï¼› 
-  å¹¶ä¸”å¯ä»¥é€šè¿‡event.targetè·å–åˆ°å½“å‰ç›‘å¬çš„å…ƒç´ ï¼›

> äº‹ä»¶å§”æ‰˜å°±æ˜¯å°†äº‹ä»¶äº¤ç»™æœ€å¤–å±‚çš„å…ƒç´ å¤„ç†

#### **äº‹ä»¶å§”æ‰˜çš„æ ‡è®°**

**æŸäº›äº‹ä»¶å§”æ‰˜å¯èƒ½éœ€è¦å¯¹å…·ä½“çš„å­ç»„ä»¶è¿›è¡ŒåŒºåˆ†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨data-å¯¹å…¶è¿›è¡Œæ ‡è®°ï¼š**

â—¼ **æ¯”å¦‚å¤šä¸ªæŒ‰é’®çš„ç‚¹å‡»ï¼ŒåŒºåˆ†ç‚¹å‡»äº†å“ªä¸€ä¸ªæŒ‰é’®ï¼š**

html**æ–‡ä»¶**

```javascript
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="btn-list">
        <button data-action="new">æ–°å»º</button>
        <button data-action="delete">åˆ é™¤</button>
        <button data-action="search">æœç´¢</button>
    </div>
</body>
</html>
<script src="eventdelegation.js"></script>
```

jsæ–‡ä»¶

```java
var btnListEl = document.querySelector(".btn-list");
btnListEl.addEventListener('click',function(event){
    //ä½¿ç”¨datasetè·å–data-*å¯¹å…¶è¿›è¡Œæ ‡è®°
    var action = event.target.dataset.action;
    switch(action)
    {
        case "new":
            console.log("æ–°å»ºæŒ‰é’®");
            break;
        case "search":
            console.log("æœç´¢æŒ‰é’®");
            break;
        case "delete":
            console.log("åˆ é™¤æŒ‰é’®");
            break;
        default:
            console.log("ä½ç½®action");
    }
})

```

#### **ç»ƒä¹ **

`è½®æ’­å›¾çš„åŸºæœ¬åˆ‡æ¢`

```javascript
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>w3cschool-ç¼–ç¨‹ç‹®</title>
<!-- cssæ ·å¼ -->
    <style type="text/css">
        /*æ¸…é™¤è¾¹è·*/
        div,ul,li{
            margin: 0;
            padding: 0;
        }
        /*é¦–å…ˆå‡†å¤‡ä¸€ä¸ªæ”¾å›¾ç‰‡çš„å®¹å™¨*/
        .container{
            width: 500px;
            height: 280px;
            position: relative;
            top: 100px;
            left: 30%;
            /*border: 1px solid #ccc;*/
        }
        /*å›¾ç‰‡æ ·å¼*/
        .container img{
            position: absolute;        /*æŠŠæ‰€æœ‰å›¾ç‰‡æ”¾åœ¨åŒä¸€ä¸ªä½ç½®*/
            width: 100%;
            transition-duration: 0.5s;    /*è®¾ç½®è¿‡æ¸¡æ—¶é—´*/
            opacity: 0;                /*æŠŠæ‰€æœ‰å›¾ç‰‡å˜é€æ˜*/
        }
        /*å›¾ç‰‡æ˜¾ç¤ºå¼€å…³*/
        .container img.on{
            opacity: 1;                /*ç”¨äºæ˜¾ç¤ºå›¾ç‰‡*/
        }
        /*å·¦å³æŒ‰é’® æŒ‰é’®ç”¨å›¾ç‰‡æ›´å¥½ç‚¹,è¿™é‡Œä¸ºäº†ç®€ä¾¿å°±ç”¨å¤§äºå°äºå·*/
        .left, .right{
            position: absolute;
            top: 30%;
            width: 60px;
            height: 100px;
            line-height: 100px;
            background-color: #666;
            opacity: 0.5;
            text-align: center;
            font-size: 60px;
            color: #ccc;
            display: none;    /*å…ˆéšè—æŒ‰é’®*/
            cursor: pointer;    /*è®¾ç½®é¼ æ ‡æ‚¬åœæ—¶çš„æ ·å¼*/
        }
        .left{
            left: 0;
        }
        .right{
            right: 0;
        }
        .container:hover .left, .container:hover .right{
            display: block;            /*é¼ æ ‡æ‚¬åœæ‰å®¹å™¨èŒƒå›´å†…æ—¶æ˜¾ç¤ºæŒ‰é’®*/
        }
        .left:hover, .right:hover{
            color: #fff;
        }
        /*ç„¦ç‚¹*/
        .container ul{
            position: absolute;
            bottom: 0;
            max-width: 500px;
            padding: 5px 200px;
        }
        .container ul li{
            list-style: none;
            float: left;
            background-color: #ccc;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
        }
        .container ul li.active{
            background-color: #282923;        /*ç„¦ç‚¹æ¿€æ´»æ—¶çš„æ ·å¼*/
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å…ˆæŠŠç¬¬ä¸€å¼ å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ -->
        <img class="on" src="image/42.png" />
        <img src="image/43.png" />
        <img src="image/44.png" />
        <img src="image/45.png" />
        <img src="image/46.png" />

        <!-- å·¦å³åˆ‡æ¢ -->
        <div class="left"><</div>
        <div class="right">></div>
        <!-- ç„¦ç‚¹ -->
        <ul>
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
<!-- jséƒ¨åˆ† -->
    <script type="text/javascript">
        //1ã€æ‰¾åˆ°containerä¸‹çš„æ‰€æœ‰imgæ ‡ç­¾,liæ ‡ç­¾,å·¦å³æŒ‰é’®
        var aImgs = document.querySelectorAll('.container img');
        var aLis = document.querySelectorAll('.container li');
        var btnLeft = document.querySelector('.container .left');
        var btnRight = document.querySelector('.container .right');
        //ç‚¹å‡»äº‹ä»¶
        //ç‚¹å‡»æŒ‰é’®å›¾ç‰‡åˆ‡æ¢
        var index = 0;        //å½“å‰å›¾ç‰‡ä¸‹æ ‡
        var lastIndex = 0;
        btnRight.addEventListener('click',function(){
            lastIndex = index;
            index ++;
            index %= aImgs.length;
            
            aImgs[lastindex].className= ''
            aLis[lastIndex].className = ''
            aImgs[index].className = 'on'
            aLis[index].className = 'active'

        })
        //å·¦è¾¹æŒ‰é’®ç±»ä¼¼
        btnLeft.onclick = function(){
          lastIndex = index;
          index--;
          index %= aImgs.length;
          aImgs[lastindex].className= ''
          aLis[lastIndex].className = ''
          aImgs[index].className = 'on'
          aLis[index].className = 'active'
        }
    </script>
</body>
</html>
```

